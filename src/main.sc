require: patterns.sc

require: patterns.sc
  module = sys.zb-common
  
init:
    bind("onAnyError", function($context) {
        $reactions.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –î–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤–≤–µ–¥–∏—Ç–µ /start");
        $jsapi.stopSession();
    });

    bind("onDialogError", function($context) {
        $reactions.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –î–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤–≤–µ–¥–∏—Ç–µ /start");
        $jsapi.stopSession();
    });

    bind("onScriptError", function($context) {
        $reactions.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –î–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤–≤–µ–¥–∏—Ç–µ /start");
        $jsapi.stopSession();
    });

theme: /

    state: Start
        q!: *start* *
        a: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!
        go!: /MainState

    state: MainState
        script:
            $reactions.answer("–°–µ–π—á–∞—Å —Ä–∞—Å—Å–∫–∞–∂—É –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π.\n–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å:\n1) –ü–æ–º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.\n2) –ü–æ–º–µ–Ω—è—Ç—å PIN-–∫–æ–¥ –æ—Ç –∫–∞—Ä—Ç—ã.\n\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ü–∏—Ñ—Ä—É, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∞—à–µ–º—É –≤—ã–±–æ—Ä—É.");

        state: AppSettings
            q!: * { {[$howTo] [$change]} * $password * $app} *
            q: [$oneWord] [$preposition] $first [$oneWord]
            q: * $app *
            script:
                $reactions.answer("–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:\n1) –ù–∞ —ç–∫—Ä–∞–Ω–µ \"–ü—Ä–æ—Ñ–∏–ª—å\" –≤—ã–±–µ—Ä–∏—Ç–µ \"–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\".\n2) –í–≤–µ–¥–∏—Ç–µ SMS-–∫–æ–¥.\n3) –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –µ–≥–æ.");
                $reactions.timeout({interval: 2, targetState: "/MainState/AppSettings/AppSettingsSecond"});

            state: AppSettingsSecond
                script:
                    $reactions.answer("–õ–∏–±–æ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É \"–í—ã–π—Ç–∏\" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.\n–ü–æ—Å–ª–µ —á–µ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é: \n1) –í–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (–µ—Å–ª–∏ –æ—Ñ–æ—Ä–º–ª—è–ª–∏ —Ä–∞–Ω–µ–µ, –∏–Ω–∞—á–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è). \n2) –£–∫–∞–∑–∞—Ç—å –∫–æ–¥ –∏–∑ —Å–º—Å-–∫–æ–¥.\n3) –ü—Ä–∏–¥—É–º–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞.");
                    $reactions.timeout({interval: 2, targetState: "/EndOfScript"});
    
        state: PinCodeCard
            q!: * { {[$howTo] [$app] [$change]} * $password * $card} *
            q: [$oneWord] [$preposition] $second [$oneWord]
            q: * $card *
            script:
                $reactions.answer("–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:\n1) –ù–∞ —ç–∫—Ä–∞–Ω–µ \"–ú–æ–∏ –¥–µ–Ω—å–≥–∏\" –≤ —Ä–∞–∑–¥–µ–ª–µ \"–ö–∞—Ä—Ç—ã\" –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é.\n2) –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É \"–ù–∞—Å—Ç—Ä–æ–π–∫–∏\".\n3) –ù–∞–∂–º–∏—Ç–µ \"–°–º–µ–Ω–∏—Ç—å –ø–∏–Ω-–∫–æ–¥\".\n4) –ò –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é, —É–¥–æ–±–Ω—É—é –≤–∞–º.\n5) –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –µ–µ.");
                $reactions.answer("–ò –≤—Å–µ –≥–æ—Ç–æ–≤–æ! \n–ü–∏–Ω-–∫–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. üôÇ");
                $reactions.transition("/EndOfScript");

        state: NoMatch
            event!: noMatch
            q!: * { {[$howTo] [$change]} * $password} *
            go!: /MainState
            
        state: SpeechNotRecognized
            event!: speechNotRecognized
            script:
                $jsapi.stopSession();

    state: EndOfScript
        script:
            $reactions.answer("–ü—Ä–∏—è—Ç–Ω–æ –±—ã–ª–æ –ø–æ–æ–±—â–∞—Ç—å—Å—è. –í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å–Ω–æ–≤–∞ üôÇ");
            $jsapi.stopSession();